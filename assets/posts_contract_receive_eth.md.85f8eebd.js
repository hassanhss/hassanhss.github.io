import{_ as e,o as a,c as l,f as c}from"./app.6c0794bd.js";const h='{"title":"Solidity\u63A5\u6536ETH","description":"\u63A5\u6536ETH","frontmatter":{"date":"2023-01-13T00:00:00.000Z","title":"Solidity\u63A5\u6536ETH","tags":["\u667A\u80FD\u5408\u7EA6","Solidity"],"description":"\u63A5\u6536ETH"},"headers":[{"level":2,"title":"\u63A5\u6536ETH\u51FD\u6570receive","slug":"\u63A5\u6536eth\u51FD\u6570receive"},{"level":2,"title":"\u56DE\u9000\u51FD\u6570 fallback","slug":"\u56DE\u9000\u51FD\u6570-fallback"},{"level":2,"title":"receive\u548Cfallback\u7684\u533A\u522B","slug":"receive\u548Cfallback\u7684\u533A\u522B"}],"relativePath":"posts/contract/receive_eth.md"}',i={},r=c(`<h1 id="solidity\u63A5\u6536eth" tabindex="-1">Solidity\u63A5\u6536ETH <a class="header-anchor" href="#solidity\u63A5\u6536eth" aria-hidden="true">#</a></h1><p>Solidity\u652F\u6301\u4E24\u79CD\u7279\u6B8A\u7684\u56DE\u8C03\u51FD\u6570\uFF0Creceive()\u548Cfallback()\uFF0C\u4ED6\u4EEC\u4E3B\u8981\u5728\u4E24\u79CD\u60C5\u51B5\u4E0B\u4F7F\u7528\uFF1A</p><ol><li>\u63A5\u6536ETH</li><li>\u5904\u7406\u5408\u7EA6\u4E2D\u4E0D\u5B58\u5728\u7684\u51FD\u6570\u56DE\u8C03(\u4EE3\u7406\u5408\u7EA6proxy contract)</li></ol><h2 id="\u63A5\u6536eth\u51FD\u6570receive" tabindex="-1">\u63A5\u6536ETH\u51FD\u6570receive <a class="header-anchor" href="#\u63A5\u6536eth\u51FD\u6570receive" aria-hidden="true">#</a></h2><p>receive()\u53EA\u7528\u4E8E\u5904\u7406\u63A5\u6536ETH\u3002\u4E00\u4E2A\u5408\u7EA6\u6700\u591A\u6709\u4E00\u4E2Areceive()\u51FD\u6570\uFF0C\u58F0\u660E\u65B9\u5F0F\u4E0E\u4E00\u822C\u51FD\u6570\u4E0D\u4E00\u6837\uFF0C\u4E0D\u9700\u8981function\u5173\u952E\u5B57\uFF1Areceive() external payable { ... }\u3002receive()\u51FD\u6570\u4E0D\u80FD\u6709\u4EFB\u4F55\u7684\u53C2\u6570\uFF0C\u4E0D\u80FD\u8FD4\u56DE\u4EFB\u4F55\u503C\uFF0C\u5FC5\u987B\u5305\u542Bexternal\u548Cpayable\u3002</p><p>\u5F53\u5408\u7EA6\u63A5\u6536ETH\u7684\u65F6\u5019\uFF0Creceive()\u4F1A\u88AB\u89E6\u53D1\u3002receive()\u6700\u597D\u4E0D\u8981\u6267\u884C\u592A\u591A\u7684\u903B\u8F91\u56E0\u4E3A\u5982\u679C\u522B\u4EBA\u7528send\u548Ctransfer\u65B9\u6CD5\u53D1\u9001ETH\u7684\u8BDD\uFF0Cgas\u4F1A\u9650\u5236\u57282300\uFF0Creceive()\u592A\u590D\u6742\u53EF\u80FD\u4F1A\u89E6\u53D1Out of Gas\u62A5\u9519\uFF1B\u5982\u679C\u7528call\u5C31\u53EF\u4EE5\u81EA\u5B9A\u4E49gas\u6267\u884C\u66F4\u590D\u6742\u7684\u903B\u8F91\uFF08\u8FD9\u4E09\u79CD\u53D1\u9001ETH\u7684\u65B9\u6CD5\u6211\u4EEC\u4E4B\u540E\u4F1A\u8BB2\u5230\uFF09\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u5728receive()\u91CC\u53D1\u9001\u4E00\u4E2Aevent\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-"><pre><code>    // \u5B9A\u4E49\u4E8B\u4EF6
    event Received(address Sender, uint Value);
    // \u63A5\u6536ETH\u65F6\u91CA\u653EReceived\u4E8B\u4EF6
    receive() external payable {
        emit Received(msg.sender, msg.value);
    }
</code></pre></div><p>\u6709\u4E9B\u6076\u610F\u5408\u7EA6\uFF0C\u4F1A\u5728receive() \u51FD\u6570\uFF08\u8001\u7248\u672C\u7684\u8BDD\uFF0C\u5C31\u662F fallback() \u51FD\u6570\uFF09\u5D4C\u5165\u6076\u610F\u6D88\u8017gas\u7684\u5185\u5BB9\u6216\u8005\u4F7F\u5F97\u6267\u884C\u6545\u610F\u5931\u8D25\u7684\u4EE3\u7801\uFF0C\u5BFC\u81F4\u4E00\u4E9B\u5305\u542B\u9000\u6B3E\u548C\u8F6C\u8D26\u903B\u8F91\u7684\u5408\u7EA6\u4E0D\u80FD\u6B63\u5E38\u5DE5\u4F5C\uFF0C\u56E0\u6B64\u5199\u5305\u542B\u9000\u6B3E\u7B49\u903B\u8F91\u7684\u5408\u7EA6\u65F6\u5019\uFF0C\u4E00\u5B9A\u8981\u6CE8\u610F\u8FD9\u79CD\u60C5\u51B5\u3002</p><h2 id="\u56DE\u9000\u51FD\u6570-fallback" tabindex="-1">\u56DE\u9000\u51FD\u6570 fallback <a class="header-anchor" href="#\u56DE\u9000\u51FD\u6570-fallback" aria-hidden="true">#</a></h2><p>fallback()\u51FD\u6570\u4F1A\u5728\u8C03\u7528\u5408\u7EA6\u4E0D\u5B58\u5728\u7684\u51FD\u6570\u65F6\u88AB\u89E6\u53D1\u3002\u53EF\u7528\u4E8E\u63A5\u6536ETH\uFF0C\u4E5F\u53EF\u4EE5\u7528\u4E8E\u4EE3\u7406\u5408\u7EA6proxy contract\u3002fallback()\u58F0\u660E\u65F6\u4E0D\u9700\u8981function\u5173\u952E\u5B57\uFF0C\u5FC5\u987B\u7531external\u4FEE\u9970\uFF0C\u4E00\u822C\u4E5F\u4F1A\u7528payable\u4FEE\u9970\uFF0C\u7528\u4E8E\u63A5\u6536ETH:fallback() external payable { ... }\u3002</p><p>\u6211\u4EEC\u5B9A\u4E49\u4E00\u4E2Afallback()\u51FD\u6570\uFF0C\u88AB\u89E6\u53D1\u65F6\u5019\u4F1A\u91CA\u653EfallbackCalled\u4E8B\u4EF6\uFF0C\u5E76\u8F93\u51FAmsg.sender\uFF0Cmsg.value\u548Cmsg.data:</p><div class="language-"><pre><code>    // fallback
    fallback() external payable{
        emit fallbackCalled(msg.sender, msg.value, msg.data);
    }
</code></pre></div><h2 id="receive\u548Cfallback\u7684\u533A\u522B" tabindex="-1">receive\u548Cfallback\u7684\u533A\u522B <a class="header-anchor" href="#receive\u548Cfallback\u7684\u533A\u522B" aria-hidden="true">#</a></h2><p>receive\u548Cfallback\u90FD\u80FD\u591F\u7528\u4E8E\u63A5\u6536ETH\uFF0C\u4ED6\u4EEC\u89E6\u53D1\u7684\u89C4\u5219\u5982\u4E0B\uFF1A</p><div class="language-"><pre><code>    \u89E6\u53D1fallback() \u8FD8\u662F receive()?
            \u63A5\u6536ETH
                |
            msg.data\u662F\u7A7A\uFF1F
                /  \\
            \u662F    \u5426
            /      \\
    receive()\u5B58\u5728?   fallback()
            / \\
        \u662F  \u5426
        /     \\
    receive()   fallback()
</code></pre></div><p>\u7B80\u5355\u6765\u8BF4\uFF0C\u5408\u7EA6\u63A5\u6536ETH\u65F6\uFF0Cmsg.data\u4E3A\u7A7A\u4E14\u5B58\u5728receive()\u65F6\uFF0C\u4F1A\u89E6\u53D1receive()\uFF1Bmsg.data\u4E0D\u4E3A\u7A7A\u6216\u4E0D\u5B58\u5728receive()\u65F6\uFF0C\u4F1A\u89E6\u53D1fallback()\uFF0C\u6B64\u65F6fallback()\u5FC5\u987B\u4E3Apayable\u3002</p><p>receive()\u548Cpayable fallback()\u5747\u4E0D\u5B58\u5728\u7684\u65F6\u5019\uFF0C\u5411\u5408\u7EA6\u76F4\u63A5\u53D1\u9001ETH\u5C06\u4F1A\u62A5\u9519\uFF08\u4F60\u4ECD\u53EF\u4EE5\u901A\u8FC7\u5E26\u6709payable\u7684\u51FD\u6570\u5411\u5408\u7EA6\u53D1\u9001ETH\uFF09\u3002</p><p>receive()\u548Cfallback()\uFF0C\u4ED6\u4EEC\u4E3B\u8981\u5728\u4E24\u79CD\u60C5\u51B5\u4E0B\u88AB\u4F7F\u7528\uFF0C\u4ED6\u4EEC\u4E3B\u8981\u7528\u4E8E\u5904\u7406\u63A5\u6536ETH\u548C\u4EE3\u7406\u5408\u7EA6proxy contract\u3002</p>`,19),t=[r];function n(d,s,o,p,v,f){return a(),l("div",null,t)}var k=e(i,[["render",n]]);export{h as __pageData,k as default};
